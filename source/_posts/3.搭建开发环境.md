---
title: 3.搭建开发环境
date: 2020-09-02 14:08:38
tags:
---

### 搭建开发环境初始化配置

首先需要创建node项目，blong-1。然后package.json中配置默认入口文件

![image-20200902152009205](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902152009205.png)

​		安装所需要的插件

​				cross-env、nodemon 到 devDependencies

​				mysql、redis、xss 到 dependencies

具体dependencies与devDependencies的区别前者是运行项目时候依赖的插件。后者是开发的时候需要的依赖

https://blog.csdn.net/gaomengwang/article/details/79457890

app.js是为了业务提供服务

![image-20200902160337953](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902160337953.png)

wwwjs是关于技术

![image-20200902160345223](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902160345223.png)

### 初始化路由

![image-20200902170111397](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902170111397.png)

接口设计

初始化返回的数据格式为json格式

![image-20200902170706347](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902170706347.png)

然后blong-1文件夹下创建src文件夹-router文件夹来负责写接口

创建blong.js负责博客列表、一篇博客内容、增删改查

![image-20200902172436815](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902172436815.png)

创建user.js负责博客登录

![image-20200902172418968](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902172418968.png)

都创建好以后就是需要引入到接口，需要处理get与post路由。以及没有找到的路由时候返回404

![image-20200902181004556](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200902181004556.png)

以上总结：

​	在写接口时候是需要把业务进行分离，这样就是模块化的划分。路由的任何东西都在他自己里处理。只关心每个接口每个路由返回什么东西。



### 博客列表路由

在处理单个路由接收参数处理之前需要单独处理一下入参，其实就是get请求url带的参数。这些都统一在app.js中做处理。

![image-20200905210758102](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200905210758102.png)

**在这里关于msg返回格式没看明白 后期还是需要补一下**

接下来就是处理url参数拿到以后的统一处理

在src中创建controller文件夹中创建blog.js来处理返回的数据![image-20200905212851429](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200905212851429.png)

然后在接口路由位置调用getList将req.query下的author和keyword传入进去，针对于目前因为没有连接数据库所以调用后返回的是全部数据，将拿到的数据后调用SuccessModel来增加返回状态。![image-20200905214015121](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200905214015121.png)

### 博客详情路由

其实现在得逻辑就很明确了。blong来负责分发区分是哪个接口。然后是哪个以后就调用他对应得处理函数逻辑。返回来的数据加上状态码就可以。

详情也是一样![image-20200908150720868](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908150720868.png)![image-20200908150749371](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908150749371.png)

### promise详解

首先创建一个index.js。同级目录创建files文件夹中创建三个：a![image-20200908152734867](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908152734867.png)、b![image-20200908152740776](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908152740776.png)、c.json![image-20200908152749808](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908152749808.png)

需求：读取a文件根据文件内容读取b文件根据文件内容读取c文件

nodejs读取文件：

首先引入fs模块（操作文件的模块），在引入pass（操作文件路径）。

打开单个文件![image-20200908170152061](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908170152061.png)

打开多个文件回调地狱![image-20200908170219870](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908170219870.png)

打开多个文件链式调用-promise方法![image-20200908170242394](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200908170242394.png)

### 处理postData

![image-20200909103800723](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909103800723.png)

![image-20200909103824722](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909103824722.png)

关于原生处理postdata还是不理解，目前关于自己得不理解就是：postDta、promise什么时候用怎么用

### 新建博客路由

![image-20200909112214154](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909112214154.png)

![image-20200909112229779](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909112229779.png)

### 更新博客路由

![image-20200909114237976](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909114237976.png)

![image-20200909114248789](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909114248789.png)

### 登录路由

![image-20200909140915998](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909140915998.png)

![image-20200909140932827](https://zcx666666.oss-cn-beijing.aliyuncs.com/img/image-20200909140932827.png)



## 总结

### 1:node.js处理http请求得常用技能，postman的使用

​				比如：获取method、获取URL、处理路由、获取postData。

​    			postman使用

### 2:node.js开发博客项目接口（未连接数据库、未使用登录）

​				流程通了只是对接数据库

### 3:为何要将router和contorller分开?

​				router只管路由相关的。来了什么路由就分配什么数据。至于数据是什么样子的不管。来了路由确保数据的正确格式。就是返回状态。

   			contorller只管处理数据。根据参数处理。来了参数处理数据吧数据返回。















